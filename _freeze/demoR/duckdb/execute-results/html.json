{
  "hash": "1729d013f27f851abea9fac9fdd6f126",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: DuckDB in R\nformat:\n  aps-html:\n    code-tools: true\n---\n\n\n## Establish a connection to DuckDB\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(DBI)\nlibrary(duckdb)\nlibrary(duckplyr)\n\n# to start an in-memory database\ncon <- dbConnect(duckdb())\n# or con <- dbConnect(duckdb(), dbdir = \":memory:\")\n\n# to use a database file (not shared between processes)\n# con <- dbConnect(duckdb(), dbdir = \"my-db.duckdb\", read_only = FALSE)\n# to use a database file (shared between processes)\n# con <- dbConnect(duckdb(), dbdir = \"my-db.duckdb\", read_only = TRUE)\n```\n:::\n\n\n## Load data into DuckDB\n\n### Load data from `R` chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# write mtcars, from R environment, to duckdb database\ndbWriteTable(con, \"mtcars\", mtcars) \n\n# register iris, from R environment, as a view in duckdb\nduckdb_register(con, \"iris_view\", iris) \nduckdb_register(con, \"flights\", nycflights13::flights)\n\n# read data from local file to duckdb\nduckdb_read_csv(con, \"gdp\", \"data/gdp.csv\", na.strings = \"NA\")\n```\n:::\n\n\n### Load data from `sql` chunk\n\n\n::: {.cell}\n\n```{.sql .cell-code}\ncreate table gdp2 as\nselect * from read_csv('data/gdp.csv')\n```\n:::\n\n\n### Show tables in DuckDB\n\n-   list tables in `R` chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndbListTables(con) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"flights\"   \"gdp\"       \"gdp2\"      \"iris_view\" \"mtcars\"   \n```\n\n\n:::\n:::\n\n\n-   list tables in `sql connection` chunk\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nshow tables\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 5 records\n\n|name      |\n|:---------|\n|flights   |\n|gdp       |\n|gdp2      |\n|iris_view |\n|mtcars    |\n\n</div>\n:::\n\n\n## Query data from DuckDB\n\n### Oder of query execution\n\n![](../fig/sql_query_order.webp)\n\nPlease visit [SQL Query Order](https://lukianovihor.medium.com/sql-order-of-query-execution-8c7cd926400) for more information.\n\n### View the whole table\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT * FROM gdp\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|X  |country_name |scode | COWcode| year| gdppc| edu_year|\n|:--|:------------|:-----|-------:|----:|-----:|--------:|\n|1  |Mexico       |MEX   |      70| 1946| 3.174|    2.292|\n|2  |Mexico       |MEX   |      70| 1947| 3.242|    2.354|\n|3  |Mexico       |MEX   |      70| 1948| 3.366|    2.416|\n|4  |Mexico       |MEX   |      70| 1949| 3.568|    2.478|\n|5  |Mexico       |MEX   |      70| 1950| 3.960|    2.540|\n|6  |Mexico       |MEX   |      70| 1951| 4.181|    2.628|\n|7  |Mexico       |MEX   |      70| 1952| 4.288|    2.716|\n|8  |Mexico       |MEX   |      70| 1953| 4.306|    2.804|\n|9  |Mexico       |MEX   |      70| 1954| 4.469|    2.892|\n|10 |Mexico       |MEX   |      70| 1955| 4.644|    2.980|\n\n</div>\n:::\n\n\n### More complex queries\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nselect * from mtcars\nwhere hp > 100\norder by -hp\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|  mpg| cyl|  disp|  hp| drat|    wt|  qsec| vs| am| gear| carb|\n|----:|---:|-----:|---:|----:|-----:|-----:|--:|--:|----:|----:|\n| 15.0|   8| 301.0| 335| 3.54| 3.570| 14.60|  0|  1|    5|    8|\n| 15.8|   8| 351.0| 264| 4.22| 3.170| 14.50|  0|  1|    5|    4|\n| 14.3|   8| 360.0| 245| 3.21| 3.570| 15.84|  0|  0|    3|    4|\n| 13.3|   8| 350.0| 245| 3.73| 3.840| 15.41|  0|  0|    3|    4|\n| 14.7|   8| 440.0| 230| 3.23| 5.345| 17.42|  0|  0|    3|    4|\n| 10.4|   8| 460.0| 215| 3.00| 5.424| 17.82|  0|  0|    3|    4|\n| 10.4|   8| 472.0| 205| 2.93| 5.250| 17.98|  0|  0|    3|    4|\n| 16.4|   8| 275.8| 180| 3.07| 4.070| 17.40|  0|  0|    3|    3|\n| 17.3|   8| 275.8| 180| 3.07| 3.730| 17.60|  0|  0|    3|    3|\n| 15.2|   8| 275.8| 180| 3.07| 3.780| 18.00|  0|  0|    3|    3|\n\n</div>\n:::\n\n\nWe can omit `Select *` in the query in `duckdb` as it is the default.\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nfrom mtcars\nwhere hp > 100\norder by -hp\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|  mpg| cyl|  disp|  hp| drat|    wt|  qsec| vs| am| gear| carb|\n|----:|---:|-----:|---:|----:|-----:|-----:|--:|--:|----:|----:|\n| 15.0|   8| 301.0| 335| 3.54| 3.570| 14.60|  0|  1|    5|    8|\n| 15.8|   8| 351.0| 264| 4.22| 3.170| 14.50|  0|  1|    5|    4|\n| 14.3|   8| 360.0| 245| 3.21| 3.570| 15.84|  0|  0|    3|    4|\n| 13.3|   8| 350.0| 245| 3.73| 3.840| 15.41|  0|  0|    3|    4|\n| 14.7|   8| 440.0| 230| 3.23| 5.345| 17.42|  0|  0|    3|    4|\n| 10.4|   8| 460.0| 215| 3.00| 5.424| 17.82|  0|  0|    3|    4|\n| 10.4|   8| 472.0| 205| 2.93| 5.250| 17.98|  0|  0|    3|    4|\n| 16.4|   8| 275.8| 180| 3.07| 4.070| 17.40|  0|  0|    3|    3|\n| 17.3|   8| 275.8| 180| 3.07| 3.730| 17.60|  0|  0|    3|    3|\n| 15.2|   8| 275.8| 180| 3.07| 3.780| 18.00|  0|  0|    3|    3|\n\n</div>\n:::\n\n\nWe can anti-select columns in the query in `duckdb` as shown below.\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nfrom flights\nselect * exclude (year, month, day)\nwhere month = 1 and day = 1\norder by dep_delay desc\nlimit 10\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n| dep_time| sched_dep_time| dep_delay| arr_time| sched_arr_time| arr_delay|carrier | flight|tailnum |origin |dest | air_time| distance| hour| minute|time_hour           |\n|--------:|--------------:|---------:|--------:|--------------:|---------:|:-------|------:|:-------|:------|:----|--------:|--------:|----:|------:|:-------------------|\n|      848|           1835|       853|     1001|           1950|       851|MQ      |   3944|N942MQ  |JFK    |BWI  |       41|      184|   18|     35|2013-01-01 23:00:00 |\n|     2343|           1724|       379|      314|           1938|       456|EV      |   4321|N21197  |EWR    |MCI  |      222|     1092|   17|     24|2013-01-01 22:00:00 |\n|     1815|           1325|       290|     2120|           1542|       338|EV      |   4417|N17185  |EWR    |OMA  |      213|     1134|   13|     25|2013-01-01 18:00:00 |\n|     2205|           1720|       285|       46|           2040|       246|AA      |   1999|N5DNAA  |EWR    |MIA  |      146|     1085|   17|     20|2013-01-01 22:00:00 |\n|     1842|           1422|       260|     1958|           1535|       263|EV      |   4633|N18120  |EWR    |BTV  |       46|      266|   14|     22|2013-01-01 19:00:00 |\n|     2115|           1700|       255|     2330|           1920|       250|9E      |   3347|N924XJ  |JFK    |CVG  |      115|      589|   17|      0|2013-01-01 22:00:00 |\n|     2006|           1630|       216|     2230|           1848|       222|EV      |   4644|N14972  |EWR    |SAV  |      121|      708|   16|     30|2013-01-01 21:00:00 |\n|     2312|           2000|       192|       21|           2110|       191|EV      |   4312|N13958  |EWR    |DCA  |       44|      199|   20|      0|2013-01-02 01:00:00 |\n|     1942|           1705|       157|     2124|           1830|       174|MQ      |   4410|N835MQ  |JFK    |DCA  |       60|      213|   17|      5|2013-01-01 22:00:00 |\n|     1938|           1703|       155|     2109|           1823|       166|EV      |   4300|N18557  |EWR    |RIC  |       68|      277|   17|      3|2013-01-01 22:00:00 |\n\n</div>\n:::\n\n\nMore complex queries can be written in `sql` chunk as shown below.\n\n\n::: {.cell}\n\n```{.sql .cell-code}\nSELECT *\nFROM (\n   SELECT\n     tailnum,\n    COUNT(*) AS count,\n    AVG(distance) AS dist,\n    AVG(arr_delay) AS delay\n  FROM flights\n  GROUP BY tailnum\n) q01\nWHERE (count > 20.0) AND (dist < 2000.0) AND (NOT((delay IS NULL)))\nlimit 10\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: Displaying records 1 - 10\n\n|tailnum | count|      dist|      delay|\n|:-------|-----:|---------:|----------:|\n|N708JB  |   246| 1389.9959|  8.5126050|\n|N535UW  |    60| 1669.4000|  2.1333333|\n|N33289  |   119| 1420.7395|  2.4621849|\n|N3GKAA  |    77| 1246.5974|  4.9733333|\n|N75435  |    89| 1760.4831|  4.9438202|\n|N3EKAA  |    45| 1186.7778|  0.2444444|\n|N562JB  |   315| 1243.7810| 10.9903846|\n|N37456  |    89| 1634.2022| -7.8409091|\n|N625JB  |   275| 1463.5709|  7.1102941|\n|N789SW  |    30|  967.3667|  9.9655172|\n\n</div>\n:::\n\n\n## Save outcome of query into R environment\n\nWe can save the outcome of the query into the R environment as shown below[^1].\n\n[^1]: Please go to upper right corner to view the source code.\n\n\n::: {.cell output.var='top10_delayed_planes'}\n\n```{.sql .cell-code}\nSELECT tailnum, AVG(distance) AS dist, AVG(arr_delay) AS delay\nFROM flights\nWHERE month = 1\nGROUP BY tailnum\nHAVING COUNT(*) > 20\nORDER BY delay DESC\nLIMIT 10\n```\n:::\n\n\n\n\nThe outcome of the query is saved in the R environment as `top10_delayed_planes` and we can call it in R chunk as shown below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop10_delayed_planes |> \n  gt() |> \n  tab_options(table.width = pct(90),\n              column_labels.font.size = 16,\n              column_labels.font.weight = \"bold\",\n              column_labels.text_transform = \"capitalize\") |>\n  opt_row_striping()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"elkqjtdjxa\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#elkqjtdjxa table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#elkqjtdjxa thead, #elkqjtdjxa tbody, #elkqjtdjxa tfoot, #elkqjtdjxa tr, #elkqjtdjxa td, #elkqjtdjxa th {\n  border-style: none;\n}\n\n#elkqjtdjxa p {\n  margin: 0;\n  padding: 0;\n}\n\n#elkqjtdjxa .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 90%;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#elkqjtdjxa .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#elkqjtdjxa .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#elkqjtdjxa .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 16px;\n  font-weight: bold;\n  text-transform: capitalize;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#elkqjtdjxa .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 16px;\n  font-weight: bold;\n  text-transform: capitalize;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#elkqjtdjxa .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#elkqjtdjxa .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#elkqjtdjxa .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#elkqjtdjxa .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#elkqjtdjxa .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#elkqjtdjxa .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#elkqjtdjxa .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#elkqjtdjxa .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#elkqjtdjxa .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#elkqjtdjxa .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elkqjtdjxa .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#elkqjtdjxa .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#elkqjtdjxa .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#elkqjtdjxa .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elkqjtdjxa .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#elkqjtdjxa .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elkqjtdjxa .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#elkqjtdjxa .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elkqjtdjxa .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#elkqjtdjxa .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#elkqjtdjxa .gt_left {\n  text-align: left;\n}\n\n#elkqjtdjxa .gt_center {\n  text-align: center;\n}\n\n#elkqjtdjxa .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#elkqjtdjxa .gt_font_normal {\n  font-weight: normal;\n}\n\n#elkqjtdjxa .gt_font_bold {\n  font-weight: bold;\n}\n\n#elkqjtdjxa .gt_font_italic {\n  font-style: italic;\n}\n\n#elkqjtdjxa .gt_super {\n  font-size: 65%;\n}\n\n#elkqjtdjxa .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#elkqjtdjxa .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#elkqjtdjxa .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#elkqjtdjxa .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#elkqjtdjxa .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#elkqjtdjxa .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#elkqjtdjxa .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"tailnum\">tailnum</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dist\">dist</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"delay\">delay</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left\">N21144</td>\n<td headers=\"dist\" class=\"gt_row gt_right\">601.4286</td>\n<td headers=\"delay\" class=\"gt_row gt_right\">59.10000</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left gt_striped\">N14920</td>\n<td headers=\"dist\" class=\"gt_row gt_right gt_striped\">423.9048</td>\n<td headers=\"delay\" class=\"gt_row gt_right gt_striped\">52.28571</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left\">N517MQ</td>\n<td headers=\"dist\" class=\"gt_row gt_right\">590.0968</td>\n<td headers=\"delay\" class=\"gt_row gt_right\">51.40000</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left gt_striped\">N21537</td>\n<td headers=\"dist\" class=\"gt_row gt_right gt_striped\">529.1111</td>\n<td headers=\"delay\" class=\"gt_row gt_right gt_striped\">50.40741</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left\">N10575</td>\n<td headers=\"dist\" class=\"gt_row gt_right\">485.4000</td>\n<td headers=\"delay\" class=\"gt_row gt_right\">48.10714</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left gt_striped\">N13994</td>\n<td headers=\"dist\" class=\"gt_row gt_right gt_striped\">476.0294</td>\n<td headers=\"delay\" class=\"gt_row gt_right gt_striped\">47.90625</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left\">N16546</td>\n<td headers=\"dist\" class=\"gt_row gt_right\">519.8800</td>\n<td headers=\"delay\" class=\"gt_row gt_right\">46.36000</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left gt_striped\">N13553</td>\n<td headers=\"dist\" class=\"gt_row gt_right gt_striped\">482.7429</td>\n<td headers=\"delay\" class=\"gt_row gt_right gt_striped\">43.33333</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left\">N13958</td>\n<td headers=\"dist\" class=\"gt_row gt_right\">442.8400</td>\n<td headers=\"delay\" class=\"gt_row gt_right\">43.00000</td></tr>\n    <tr><td headers=\"tailnum\" class=\"gt_row gt_left gt_striped\">N11565</td>\n<td headers=\"dist\" class=\"gt_row gt_right gt_striped\">442.1538</td>\n<td headers=\"delay\" class=\"gt_row gt_right gt_striped\">40.08333</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nWhy bother with `duckdb` when we can do the same in `R`?\nThe answer is that `duckdb` is faster than `R` for large datasets.\nFor example, the `vdemdata` dataset has 500 V-Dem indicators and 245 indices + 57 other indicators from other data sources.\nIt is a huge dataset and it is almost impossible to view the whole V-Dem dataset in R.\nIt would be better, although still quite slow, to use `duckdb` to query the dataset and view the outcome in R.\n\n## Disconnect from DuckDB\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndbDisconnect(con, shutdown = TRUE)\n```\n:::\n",
    "supporting": [
      "duckdb_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}