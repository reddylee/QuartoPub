{
  "hash": "ead282418026eeb482e7b640ee4a5d84",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Parameterized Reporting with Quarto\nsubtitle: \"Registered dogs in Switzerland\"\nauthor: \"Jadey Ryan\"\ndate: \"2024-03-27\"\ndate-modified: last-modified\nformat: \n  aps-html:\n    code-tools: true\ncategories: [quarto, params]\nparams:\n  pet_type: \"dogs\"\n  fave_breed: \"Australian Shepherd\"\nother-links:\n    - text: Download data\n      href: data/pets.RDS\n      icon: download\n---\n\n\n\n\n---------------------------------------------------------------------------------\n\n## Setup\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Attach packages\nlibrary(tidyverse)\n\n# Load data\npets <- read_rds(\"data/pets.RDS\")\n```\n:::\n\n\n\n\n## Breeds of dogs in Switzerland\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbreeds <- pets |>\n  filter(pet_type == params$pet_type)\n\n# Top 5 per date\nbreeds_top_5 <- breeds |>\n  slice_max(order_by = count, n = 5, by = date)\n\n# Top 5 overall (average across all dates)\nbreeds_avg <- breeds_top_5 |>\n  summarize(\n    \"Average Number\" = format(\n      mean(count),\n      big.mark = \",\",\n      digits = 1,\n      justify = \"right\",\n      scientific = FALSE\n    ),\n    .by = \"breed\"\n  ) |>\n  rename(\"Breed\" = breed) |>\n  head(5)\n```\n:::\n\n\n\n\nThe breed with the largest average population in Switzerland from 2016 - 2023 was\nthe **Kreuzung**.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbreeds_top_5 |>\n  ggplot(\n    aes(x = date, y = count, color = breed)\n  ) +\n  geom_line(linewidth = 1) +\n  scale_x_date(date_labels = \"%Y\", date_breaks = \"1 year\") +\n  scale_y_continuous(\n    labels = \\(x) format(x, big.mark = \",\", scientific = FALSE)\n  ) +\n  labs(\n    title = \"Evolution by breed\",\n    subtitle = str_wrap(\n      paste(\n        \"Number of registered and living\",\n        params$pet_type,\n        \"by breed. The evolution of the largest populations is presented.\"\n      ),\n      80\n    ),\n    color = NULL,\n    caption = \"Source: Identitas AG Animal Statistics\"\n  ) +\n  xlab(NULL) +\n  ylab(NULL) +\n  scale_color_brewer(palette = \"Dark2\") +\n  theme_minimal() +\n  theme(\n    plot.caption.position = \"plot\",\n    legend.position = \"top\",\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](params_files/figure-html/breeds-plot-1.png){width=672}\n:::\n:::\n\n\n\n\n## My favorite breed: Australian Shepherd\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfave_breed <- breeds |>\n  filter(breed == params$fave_breed)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfave_breed |>\n  ggplot(\n    aes(x = date, y = count)\n  ) +\n  geom_line(linewidth = 1) +\n  scale_x_date(date_labels = \"%Y\", date_breaks = \"1 year\") +\n  scale_y_continuous(\n    labels = \\(x) format(x, big.mark = \",\", scientific = FALSE)\n  ) +\n  labs(\n    title = paste(params$fave_breed, \"population\"),\n    caption = \"Source: Identitas AG Animal Statistics\"\n  ) +\n  xlab(NULL) +\n  ylab(NULL) +\n  scale_color_brewer(palette = \"Dark2\") +\n  theme_minimal() +\n  theme(\n    plot.caption.position = \"plot\",\n    legend.position = \"top\",\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](params_files/figure-html/fave-breed-plot-1.png){width=672}\n:::\n:::\n\n\n\n\n## Data source\n\n[Identitas AG](https://tierstatistik.identitas.ch/en/index.html) is the leading\nservice provider for animal health, welfare and food safety in Switzerland.\n\nDogs are obliged to be registered for licensing purposes at a local government\nlevel and this data is kept in the `Amicus` database. Other pets, such as pets,\nrodents, birds or fish, may be registered and this data is stored in the `Anis`\ndatabase.\n\n## Tutorial video\n\n\n\n\n{{< video https://youtu.be/kQn82pa04jQ?si=b5ptcn2wVHFELaSJ >}}\n\n\n{{< video https://www.youtube.com/watch?v=7dkufBboMi4&t=14s >}}\n\n",
    "supporting": [
      "params_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}